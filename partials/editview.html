
    <div class="modal-header">
        <h3 ng-show="!addingNewFacility" class="modal-title">{{facility.name}}</h3>
        <h3 ng-show="addingNewFacility" class="modal-title">Adding new facility {{facility.name}} in {{parent.name}}</h3>
    </div>

    <div class="modal-body">
        <tabset justified="true">
            <tab heading="Basic Info">
                <div class="container-fluid facility-edit-wrapper">
                    <div class="form-group">
                        <label for="facilityNameInput">Name</label>
                        <input class="form-control" type="text" value="{{facility.name}}" ng-model="facility.name" id="facilityNameInput">
                    </div>

                    <div class="form-group">
                        <label for="shortNameInput">Short name</label>
                        <input class="form-control" type="text" value="{{facility.shortName}}" ng-model="facility.shortName" id="shortNameInput">
                    </div>

                    <div class="form-group">
                        <label for="displayNameInput">Display name</label>
                        <input class="form-control" type="text" value="{{facility.displayName}}" ng-model="facility.displayName" id="displayNameInput">
                    </div>

                    <div class="form-group">
                        <label for="descriptionInput">Description</label>
                        <textarea class="form-control facility-description-area"   ng-model="facility.description" id="descriptionInput">
                            {{facility.description}}
                        </textarea>
                    </div>

                    <div class="form-group">
                        <label for="codeInput">Code</label>
                        <input class="form-control" type="text" value="{{facility.code}}" ng-model="facility.code" id="codeInput">
                    </div>
                </div>
            </tab>

            <tab heading="Datasets">
                <div class="container-fluid facility-edit-wrapper" ng-init="loadResources()">
                    <!--FIXME get this working: https://github.com/angular-ui/ui-select-->
                    <div class="form-group">
                        <label >Facility owner</label>
                        <ui-select ng-model="owner.selected"
                                       theme="bootstrap"
                                       reset-search-input="false">
                            <ui-select-match placeholder="Enter facility owner">{{$select.facilityOwners.name}}</ui-select-match>
                            <ui-select-choices repeat="owner in facilityOwners track by $index"
                                               refresh="refreshAddresses($select.search)"
                                               refresh-delay="0">
                                <div ng-bind-html="owner.facilityOwners | highlight: $select.search"></div>
                            </ui-select-choices>
                        </ui-select>
                    </div>
                    <div class="form-group">
                        <label >Location</label>
                        <ui-select ng-model="owner.selected"
                                   theme="bootstrap"
                                   reset-search-input="false">
                            <ui-select-match placeholder="Enter facility owner">{{$select.facilityOwners.name}}</ui-select-match>
                            <ui-select-choices repeat="owner in facilityOwners track by $index"
                                               refresh="refreshAddresses($select.search)"
                                               refresh-delay="0">
                                <div ng-bind-html="owner.facilityOwners | highlight: $select.search"></div>
                            </ui-select-choices>
                        </ui-select>
                    </div>
                    <div class="form-group">
                        <label >Type</label>
                        <ui-select ng-model="owner.selected"
                                   theme="bootstrap"
                                   reset-search-input="false">
                            <ui-select-match placeholder="Enter facility owner">{{$select.facilityOwners.name}}</ui-select-match>
                            <ui-select-choices repeat="owner in facilityOwners track by $index"
                                               refresh="refreshAddresses($select.search)"
                                               refresh-delay="0">
                                <div ng-bind-html="owner.facilityOwners | highlight: $select.search"></div>
                            </ui-select-choices>
                        </ui-select>
                    </div>
                </div>


                <h4>Current sets</h4>
                <div ng-repeat="item in facility.dataSets">
                    {{item.name}}
                    <span class="glyphicon glyphicon-trash pull-right" ng-click="removeDataset($index)"></span>
                </div>

                <h4>Available sets</h4>
                <div ng-repeat="item in filteredDataSets">
                    {{item.name}}
                    <span class="glyphicon glyphicon-import pull-right" ng-click="addDataset($index)"></span>
                </div>

            </tab>
            <tab heading="Location" ng-click="redrawMap()">
                <button class="btn btn-primary" ng-click="getLocation(facility.id)">Show marker</button>
                <!--Map area and stuff-->

                <button type="button" class="btn btn-primary" ng-click="hideMap = !hideMap">
                    Toggle map
                </button>
                <div collapse="hideMap">
                    <div class="mapContainer">
                        <leaflet defaults="defaults" markers="markers"
                                 center="center" layers="layers"
                                 width="100%" height="100%">
                        </leaflet>
                    </div>
                </div>
                <!--Get user location-->
                <button type="button" class="btn btn-primary" ng-click="getUserLocation()">
                    Get current position
                </button>

            </tab>
        </tabset>



<!--
        <p>Name:  {{facility.name}}</p>
        <p>Id:    {{facility.id}}</p>
        <p>Short name: {{facility.shortname}}</p>-->



    </div>
    <div class="modal-footer">
        <button class="btn btn-primary" ng-click="ok()">OK</button>
        <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
    </div>

