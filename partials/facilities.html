<h1>This is a message from the controller</h1>
{{message}}

<h2>List all facilites</h2>
<!--
    <input type="text" ng-model="page" ng-change="getFacilities()"></input>
-->
<input type="text" ng-model="search" ng-init="getFacilities()"></input>
<br />

<div class="well" style="margin-top: 30px; width: auto; overflow: hidden;">

    <ul class="nav nav-pills nav-stacked">
        <li class="animate" ng-repeat="facility in data.organisationUnits | filter:search">

            <a href="#" onclick="return false;">
                <div ng-show="showFacilityHeader($index)" ng-click="selectFacility($index)">
                    Name: {{facility.name}} <br />
                </div>

                <!-- class="well well-lg"  -->

                <div class="animate" ng-show="showExpandedFacility($index)" ng-click="deselectFacility()">

                    <a ng-click="selectParent(orgResource)" ><- {{ orgResource.parent.name }}</a>

                    <b>Id:</b>             {{orgResource.id}}   <br />
                    <b>Name:</b>           {{orgResource.name}} <br />
                    <b>Code:</b>           {{orgResource.code}} <br />
                    <b>Created:</b>        {{orgResource.created}} <br />
                    <b>Last updated:</b>   {{orgResource.lastUpdated}} <br />

                    <button ng-click="editFacility($index)">Edit</button>
                </div>

                <div class="animate" ng-show="showEditable($index)">
                    <b>Id:</b>    {{facility.id}}   <br />
                    <b>Name:</b> <input ng-model="orgResource.name" type="text" /> <br />
                    <b>Code:</b> <input ng-model="orgResource.code" type="text" /> <br />

                    <button ng-click="updateFacility($index)">Save</button> <button ng-click="selectFacility($index)">Cancel</button>
                </div>
            </a>
        </li>
    </ul>
</div>
