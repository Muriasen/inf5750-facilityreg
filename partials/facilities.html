<h1>Facilities</h1>
<h2>List all facilites</h2>
<!--
    <input type="text" ng-model="page" ng-change="getFacilities()"></input>
-->
<input type="text" ng-model="search" ng-change="getFacilities()" ng-init="getFacilities()"></input>
<br />
<button ng-click="getFacilities()" >Search</button>
<i>Searches for name by default. You may also search for a field and it's value, e.g. "code:OU_211234"</i>

<div class="well" style="margin-top: 30px; width: auto; overflow: hidden;">

    <ul class="nav nav-pills nav-stacked">
        <li class="orgunit_box" ng-model="search" ng-repeat="facility in data.organisationUnits">

            <a href="#" onclick="return false;">
                <div ng-show="showFacilityHeader($index)" ng-click="selectFacility($index)">
                    {{facility.name}} <br />
                </div>

                <div ng-show="showExpandedFacility($index)" ng-click="deselectFacility()">

                    <!-- Box hidden by default -->
                    <!-- Lets data slide in, instead of instantly pop up at some later time -->
                    <div class="orgunit_databox" ng-show="loadedYet()">

                        <a class="orgunit_parent" ng-click="selectParent(orgResource)">Parent: {{ orgResource.parent.name }}</a>

                        <b class="orgunit_box">Id:</b>             {{orgResource.id}}   <br />
                        <b class="orgunit_box">Name:</b>           {{orgResource.name}} <br />
                        <b class="orgunit_box">Short Name:</b>     {{orgResource.shortName}} <br />
                        <b class="orgunit_box">Code:</b>           {{orgResource.code}} <br />
                        <b class="orgunit_box">Created:</b>        {{orgResource.created}} <br />
                        <b class="orgunit_box">Last updated:</b>   {{orgResource.lastUpdated}} <br />

                        <button ng-click="editFacility($index)">Edit</button>
                    </div>

                </div>

                <div class="animate" ng-show="showEditable($index)">

                    <b>Id:</b>          {{orgResource.id}}   <br />
                    <b>Name:</b>        <input ng-model="orgResource.name" type="text" /> <br />
                    <b>Short name:</b>  <input ng-model="orgResource.shortName" type="text" /> <br />
                    <b>Code:</b>        <input ng-model="orgResource.code" type="text" /> <br />

                    <button ng-click="updateFacility($index)">Save</button> <button ng-click="selectFacility($index)">Cancel</button>
                </div>
            </a>
        </li>
    </ul>
</div>
