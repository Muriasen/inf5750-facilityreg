<header><h1 class="text-muted">Organisation Units</h1></header>
<h2 class="text-muted">List all facilites</h2>
<!--
    <input type="text" ng-model="page" ng-change="getFacilities()"></input>
-->
<input type="text" ng-model="search"  ng-init="getFacilities()"></input>
        <!--ng-change="getFacilities()"-->
<br />
<button type="button" class="btn btn-sm btn-default" ng-click="getFacilities()" >Search</button></br>
<i>Searches for name by default. You may also search for a field and it's value, e.g. "code:OU_211234"</i>

<div class="well" style="margin-top: 30px; width: auto; overflow: hidden;">

    <ul class="nav nav-pills nav-stacked">
        <li class="orgunit_box" ng-model="search" ng-repeat="facility in data.organisationUnits">

            <a href="#" onclick="return false;">

                <!-- Item header -->
                <div ng-show="showFacilityHeader($index)" ng-click="selectFacility($index)">
                    {{facility.name}} <br />
                </div>

                <!-- Expanded item panel -->
                <div ng-show="showExpandedFacility($index)">
                    <!-- ng-click="deselectFacility()" -->
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h3 class="panel-title">
                                <a class="orgunit_parent" ng-click="selectParent(orgResource)">{{ orgResource.parent.name }}</a> > {{orgResource.name}}
                            </h3>
                        </div>
                        <div class="panel-body">

                            <table style="width:35%">
                                <tr><td><b class="orgunit_box">Id:</b></td>              <td>{{orgResource.id}}</td> </tr>
                                <tr><td><b class="orgunit_box">Name:</b></td>            <td>{{orgResource.name}}</td> </tr>
                                <tr><td><b class="orgunit_box">Short Name:</b></td>      <td>{{orgResource.shortName}}</td> </tr>
                                <tr><td><b class="orgunit_box">Code:</b></td>            <td>{{orgResource.code}}</td> </tr>
                                <tr><td><b class="orgunit_box">Created:</b></td>         <td>{{orgResource.created}}</td> </tr>
                                <tr><td><b class="orgunit_box">Last updated:</b></td>    <td>{{orgResource.lastUpdated}}</td> </tr>
                            </table>

                            <button type="button" class="btn btn-sm btn-default" ng-click="editFacility($index)">Edit</button>
                        </div>
                    </div>
                </div>

                <!-- Edit item panel -->
                <div class="animate" ng-show="showEditable($index)">

                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h3 class="panel-title">
                                <a class="orgunit_parent" ng-click="selectParent(orgResource)">{{ orgResource.parent.name }}</a> > {{orgResource.name}}
                            </h3>
                        </div>
                        <div class="panel-body">
                            <table style="width:35%">
                                <tr><td><b>Id:</b></td>          <td>{{orgResource.id}}</td> </tr>
                                <tr><td><b>Name:</b></td>        <td><input ng-model="orgResource.name" type="text" /></td> </tr>
                                <tr><td><b>Short name:</b></td>  <td><input ng-model="orgResource.shortName" type="text" /></td> </tr>
                                <tr><td><b>Code:</b></td>        <td><input ng-model="orgResource.code" type="text" /></td> </tr>
                            </table>
                            <button type="button" class="btn btn-sm btn-default" ng-click="updateFacility($index)">Save</button>
                            <button type="button" class="btn btn-sm btn-default"  ng-click="selectFacility($index)">Cancel</button>
                        </div>
                    </div>
                </div>

            </a>
        </li>
    </ul>
</div>
<!--
                        <b class="orgunit_box">Id:</b>              {{orgResource.id}} <br />
                        <b class="orgunit_box">Name:</b>            {{orgResource.name}} <br />
                        <b class="orgunit_box">Short Name:</b>      {{orgResource.shortName}} <br />
                        <b class="orgunit_box">Code:</b>            {{orgResource.code}} <br />
                        <b class="orgunit_box">Created:</b>         {{orgResource.created}} <br />
                        <b class="orgunit_box">Last updated:</b>    {{orgResource.lastUpdated}} <br />
-->

<!--
            <div class="orgunit_databox" >
                <!-- ng-show="loadedYet()"
                <a class="orgunit_parent" ng-click="selectParent(orgResource)">Parent: {{ orgResource.parent.name }}</a>
                <table style="width:35%">
                <tr><td><b class="orgunit_box">Id:</b></td>              <td>{{orgResource.id}}</td> </tr>
                <tr><td><b class="orgunit_box">Name:</b></td>            <td>{{orgResource.name}}</td> </tr>
                <tr><td><b class="orgunit_box">Short Name:</b></td>      <td>{{orgResource.shortName}}</td> </tr>
                <tr><td><b class="orgunit_box">Code:</b></td>            <td>{{orgResource.code}}</td> </tr>
                <tr><td><b class="orgunit_box">Created:</b></td>         <td>{{orgResource.created}}</td> </tr>
                <tr><td><b class="orgunit_box">Last updated:</b></td>    <td>{{orgResource.lastUpdated}}</td> </tr>
                </table>

                <button type="button" class="btn btn-sm btn-default" ng-click="editFacility($index)">Edit</button>
            </div>-->